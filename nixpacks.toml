[phases.setup]
# Python y dependencias del sistema para WeasyPrint
nixPkgs = [
  "python311",
  "pango",
  "gobject-introspection",
  "cairo",
  "libffi",
  "gdk-pixbuf",
  "shared-mime-info"
]

# Nixpacks instala automáticamente requirements.txt en la fase install
# Instalamos los navegadores de Playwright en la fase build (después de install)
# Usamos el PATH que Nixpacks configura para el entorno virtual
[phases.build]
cmds = [
  "playwright install chromium",
  "playwright install-deps chromium"
]

[start]
cmd = "uvicorn app:app --host 0.0.0.0 --port ${PORT:-8000}"